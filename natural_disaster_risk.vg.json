{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 750,
  "height": 400,
  "background": "#fdf9f4",
  "projection": {"type": "equalEarth"},
  "data": {
    "url": "https://raw.githubusercontent.com/JuanNathan/FIT3179/main/Week9HW/ne_110m.topojson",
    "format": {"type": "topojson", "feature": "ne_110m_admin_0_countries"}
  },
  "transform": [
    {
      "lookup": "properties.NAME",
      "from": {
        "data": {
          "values": [
            {"Country": "Brunei", "Risk": 0.0},
            {"Country": "Cambodia", "Risk": 6.863070007},
            {"Country": "Indonesia", "Risk": 255.0710893},
            {"Country": "Laos", "Risk": 3.981657174},
            {"Country": "Malaysia", "Risk": 33.30756821},
            {"Country": "Myanmar", "Risk": 14.6910531},
            {"Country": "Philippines", "Risk": 4341.577889},
            {"Country": "Thailand", "Risk": 64.39030561},
            {"Country": "Timor-Leste", "Risk": 13.59841629},
            {"Country": "Vietnam", "Risk": 597.2874896}
        ]
        },
        "key": "Country",
        "fields": ["Risk"]
      }
    },
    {
      "calculate": "datum.Risk >= 0 && datum.Risk <= 7 ? 'Very Low' : datum.Risk > 7 && datum.Risk <= 32 ? 'Low' : datum.Risk > 32 && datum.Risk <= 80 ? 'Moderate' : datum.Risk > 80 && datum.Risk <= 300 ? 'High' : datum.Risk > 300 ? 'Very High' : ''",
      "as": "RiskLevel"
    }      
  ],
  "mark": {"type": "geoshape"},
  "encoding": {
    "color": {
      "field": "Risk",
      "type": "quantitative",
      "scale": {
        "type": "threshold",
        "domain": [7, 32, 80, 300],
        "range": ["#fdbe85", "#fd8d3c", "#e6550d", "#a63603", "#7f2704"]
        }
    },
    "tooltip": [
      {"field": "properties.NAME", "type": "nominal", "title": "Country"},
      {"field": "Risk", "type": "quantitative"},
      {"field": "RiskLevel", "type": "nominal", "title": "Risk Level"}
    ]
  }
}
